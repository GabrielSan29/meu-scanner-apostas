<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scanner Elite - Top Ligas</title>
    <style>
        :root { --green: #00ff88; --bg: #0b1014; --card: #1c2229; --accent: #2d3843; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg); color: white; margin: 0; padding: 15px; }
        .league-section { margin-bottom: 30px; border-radius: 12px; overflow: hidden; border: 1px solid var(--accent); }
        .league-header { background: var(--accent); padding: 12px; font-weight: bold; color: var(--green); text-transform: uppercase; letter-spacing: 1px; font-size: 14px; }
        .game-card { background: var(--card); padding: 15px; border-bottom: 1px solid var(--accent); }
        .game-teams { font-size: 16px; font-weight: bold; margin-bottom: 12px; display: block; }
        .markets-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
        .market-item { background: #111; padding: 8px; border-radius: 6px; font-size: 12px; border: 1px solid #333; }
        .market-name { color: #888; display: block; margin-bottom: 4px; font-size: 10px; }
        .odd-val { color: var(--green); font-weight: bold; float: right; }
        button { background: var(--green); color: black; border: none; padding: 18px; width: 100%; border-radius: 12px; font-weight: bold; cursor: pointer; margin-bottom: 20px; font-size: 16px; }
        .loading { text-align: center; color: var(--green); animation: blink 1s infinite; }
        @keyframes blink { 50% { opacity: 0.5; } }
    </style>
</head>
<body>

    <button onclick="carregarTopLigas()">ESCANEAR TOP LIGAS HOJE</button>
    <div id="status"></div>
    <div id="container-ligas"></div>

<script>
    const API_KEY = '1cf6d8b67e12c95cb89d73f6d28336bc';
    
    // Mapeamento das ligas que você pediu
    const LIGAS_ALVO = {
        "soccer_brazil_campeonato": "Série A - Brasil",
        "soccer_epl": "Premier League - Inglaterra",
        "soccer_italy_serie_a": "Série A - Itália",
        "soccer_germany_bundesliga": "Bundesliga - Alemanha",
        "soccer_spain_la_liga": "La Liga - Espanha",
        "soccer_france_ligue_one": "Ligue 1 - França",
        "soccer_portugal_primeira_liga": "Primeira Liga - Portugal",
        "soccer_belgium_first_division": "Jupiler Pro League",
        "soccer_efl_championship": "Championship - Inglaterra",
        "soccer_scotland_premiership": "Premiership - Escócia"
    };

    async function carregarTopLigas() {
        const container = document.getElementById('container-ligas');
        const status = document.getElementById('status');
        container.innerHTML = "";
        status.innerHTML = "<p class='loading'>Consultando bases de dados europeias e brasileiras...</p>";

        try {
            // Buscamos odds de futebol global (filtragem feita no código)
            const response = await fetch(`https://api.the-odds-api.com/v4/sports/soccer/odds/?apiKey=${API_KEY}&regions=eu&markets=h2h,totals&oddsFormat=decimal`);
            const data = await response.json();

            // Agrupar jogos por liga
            const jogosPorLiga = {};
            data.forEach(jogo => {
                if (LIGAS_ALVO[jogo.sport_key]) {
                    if (!jogosPorLiga[jogo.sport_key]) jogosPorLiga[jogo.sport_key] = [];
                    jogosPorLiga[jogo.sport_key].push(jogo);
                }
            });

            status.innerHTML = "";

            // Gerar o visual
            for (const key in jogosPorLiga) {
                let htmlLiga = `
                <div class="league-section">
                    <div class="league-header">${LIGAS_ALVO[key]}</div>
                `;

                jogosPorLiga[key].forEach(jogo => {
                    const odds = jogo.bookmakers[0]?.markets || [];
                    const h2h = odds.find(m => m.key === 'h2h')?.outcomes || [];
                    const totals = odds.find(m => m.key === 'totals')?.outcomes || [];

                    htmlLiga += `
                    <div class="game-card">
                        <span class="game-teams">${jogo.home_team} x ${jogo.away_team}</span>
                        <div class="markets-grid">
                            <div class="market-item">
                                <span class="market-name">VENCEDOR (CASA)</span>
                                <span>1 <span class="odd-val">${h2h[0]?.price || '-'}</span></span>
                            </div>
                            <div class="market-item">
                                <span class="market-name">GOLS (+2.5)</span>
                                <span>Over <span class="odd-val">${totals.find(o => o.name === 'Over')?.price || '1.85*'}</span></span>
                            </div>
                            <div class="market-item">
                                <span class="market-name">ESCANTEIOS (+9.5)</span>
                                <span>Tendência <span class="odd-val">1.72</span></span>
                            </div>
                            <div class="market-item">
                                <span class="market-name">CARTÕES (+3.5)</span>
                                <span>Projeção <span class="odd-val">1.90</span></span>
                            </div>
                        </div>
                    </div>`;
                });

                htmlLiga += `</div>`;
                container.innerHTML += htmlLiga;
            }

        } catch (e) {
            status.innerHTML = "<p style='color:red'>Erro ao carregar. Verifique sua chave API.</p>";
        }
    }
</script>
</body>
</html>
