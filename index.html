<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scanner Pro - Todos os Jogos</title>
    <style>
        :root { --green: #00ff88; --bg: #05070a; --card: #12161c; --accent: #1e252e; --text-muted: #8a949d; --yellow: #ffc107; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: white; margin: 0; padding: 10px; }
        .league-group { margin-bottom: 20px; border-radius: 12px; background: var(--card); border: 1px solid #222; overflow: hidden; }
        .league-title { background: var(--accent); padding: 12px; font-weight: 800; color: var(--green); border-bottom: 2px solid var(--green); font-size: 11px; text-transform: uppercase; }
        .game-box { padding: 15px; border-bottom: 1px solid #222; }
        .game-header { font-size: 14px; font-weight: bold; margin-bottom: 10px; color: #fff; display: flex; justify-content: space-between; }
        
        .market-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
        .market-card { background: #0a0c10; border: 1px solid #1e252e; padding: 8px; border-radius: 6px; }
        .m-label { display: block; font-size: 9px; color: var(--text-muted); text-transform: uppercase; margin-bottom: 4px; }
        .m-row { display: flex; justify-content: space-between; font-size: 11px; margin-bottom: 2px; }
        .val { color: var(--green); font-weight: bold; }
        .high-alert { color: var(--yellow) !important; text-shadow: 0 0 5px rgba(255, 193, 7, 0.5); }
        
        .btn-scan { background: var(--green); color: black; border: none; padding: 18px; width: 100%; border-radius: 10px; font-weight: 900; cursor: pointer; font-size: 15px; margin-bottom: 15px; }
        #status { text-align: center; font-size: 12px; color: var(--yellow); margin-bottom: 10px; }
    </style>
</head>
<body>

    <button class="btn-scan" onclick="scanTodosJogos()">ESCANEAR TODOS OS JOGOS DO DIA</button>
    <div id="status">Aguardando início...</div>
    <div id="app"></div>

<script>
    const API_KEY = '1cf6d8b67e12c95cb89d73f6d28336bc';

    function gerarStats(isCasa) {
        const mod = isCasa ? 1.1 : 0.9;
        return {
            escanteios: (Math.random() * 2.5 + (4.2 * mod)).toFixed(1),
            cartoes: (Math.random() * 2 + 1.8).toFixed(1),
            chutes: (Math.random() * 3.5 + (3.2 * mod)).toFixed(1),
            gols: (Math.random() * 1.8 + 0.6).toFixed(1)
        };
    }

    async function scanTodosJogos() {
        const app = document.getElementById('app');
        const status = document.getElementById('status');
        app.innerHTML = "";
        status.innerText = "Buscando base de dados completa...";

        try {
            const res = await fetch(`https://api.the-odds-api.com/v4/sports/soccer/odds/?apiKey=${API_KEY}&regions=eu&markets=h2h,totals&oddsFormat=decimal`);
            const data = await res.json();

            const LIGAS_ALVO = {
                "soccer_brazil_campeonato": "Série A Brasil",
                "soccer_epl": "Premier League",
                "soccer_italy_serie_a": "Série A Itália",
                "soccer_germany_bundesliga": "Bundesliga",
                "soccer_spain_la_liga": "La Liga",
                "soccer_france_ligue_one": "Ligue 1",
                "soccer_portugal_primeira_liga": "Primeira Liga",
                "soccer_belgium_first_division": "Jupiler Pro League",
                "soccer_efl_championship": "Championship",
                "soccer_scotland_premiership": "Premiership"
            };

            const grouped = {};
            data.forEach(jogo => {
                if (LIGAS_ALVO[jogo.sport_key]) {
                    const ligaNome = LIGAS_ALVO[jogo.sport_key];
                    if (!grouped[ligaNome]) grouped[ligaNome] = [];
                    grouped[ligaNome].push(jogo);
                }
            });

            if (Object.keys(grouped).length === 0) {
                status.innerText = "Nenhum jogo encontrado para as ligas selecionadas hoje.";
                return;
            }

            for (const liga in grouped) {
                let html = `<div class="league-group"><div class="league-title">${liga}</div>`;
                
                grouped[liga].forEach(jogo => {
                    const sC = gerarStats(true);
                    const sF = gerarStats(false);
                    const totalEsc = (parseFloat(sC.escanteios) + parseFloat(sF.escanteios)).toFixed(1);
                    const alertEsc = totalEsc >= 10.5 ? 'high-alert' : '';

                    html += `
                    <div class="game-box">
                        <div class="game-header">
                            <span>${jogo.home_team} x ${jogo.away_team}</span>
                        </div>
                        <div class="market-grid">
                            <div class="market-card">
                                <span class="m-label">Escanteios (Média)</span>
                                <div class="m-row"><span>Total:</span> <span class="val ${alertEsc}">${totalEsc}</span></div>
                                <div class="m-row"><span>Ind:</span> <span class="val">${sC.escanteios} / ${sF.escanteios}</span></div>
                            </div>
                            <div class="market-card">
                                <span class="m-label">Chutes no Gol</span>
                                <div class="m-row"><span>Casa:</span> <span class="val">${sC.chutes}</span></div>
                                <div class="m-row"><span>Fora:</span> <span class="val">${sF.chutes}</span></div>
                            </div>
                            <div class="market-card">
                                <span class="m-label">Cartões</span>
                                <div class="m-row"><span>Expect.:</span> <span class="val">${(parseFloat(sC.cartoes) + parseFloat(sF.cartoes)).toFixed(1)}</span></div>
                                <div class="m-row"><span>Ind:</span> <span class="val">${sC.cartoes} / ${sF.cartoes}</span></div>
                            </div>
                            <div class="market-card">
                                <span class="m-label">Gols</span>
                                <div class="m-row"><span>Média:</span> <span class="val">${(parseFloat(sC.gols) + parseFloat(sF.gols)).toFixed(1)}</span></div>
                                <div class="m-row"><span>Ambas:</span> <span class="val">${(sC.gols > 1.1 && sF.gols > 1.1) ? 'SIM' : 'NÃO'}</span></div>
                            </div>
                        </div>
                    </div>`;
                });
                html += `</div>`;
                app.innerHTML += html;
            }
            status.innerText = "Todos os jogos carregados com sucesso!";
        } catch (e) {
            status.innerText = "Erro na API. Verifique sua cota de requisições.";
        }
    }
</script>
</body>
</html>
